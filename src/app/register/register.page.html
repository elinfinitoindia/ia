<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-icon
        slot="start"
        name="arrow-back"
        (click)="backButton(!showOTPInput)"
        *ngIf="!showOTPInput"
        style="padding-left: 12px;"
      ></ion-icon>
      <ion-icon
        slot="start"
        name="arrow-back"
        (click)="backButton(showOTPInput)"
        *ngIf="showOTPInput"
        style="padding-left: 12px;"
      ></ion-icon>
    </ion-buttons>
    <ion-title></ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-row class="ion-padding" *ngIf="!showOTPInput">
    <ion-col size="12" class="ion-padding-vertical">
      <ion-row>
        <ion-col>
          <h2 style="font-size: 24px; font-weight: 600;">
            Enter Phone number for verification
          </h2>
          <p>
            We will send an otp to verify the number.
          </p>
          <form [formGroup]="loginForm">
            <ion-row>
              <ion-col size="12">
                <ion-item>
                  <ion-label position="fixed"> +91</ion-label>
                  <!-- <ion-input placeholder="Your number"></ion-input> -->
                  <ion-input
                    [pattern]="mobNumberPattern"
                    style="font-size: medium;"
                    type="number"
                    placeholder="Enter Phone number"
                    class=""
                    padding-horizontal
                    clear-input="true"
                    formControlName="phone"
                    debounce="300"
                  ></ion-input>
                </ion-item>
              </ion-col>
            </ion-row>
            <div *ngIf="loginForm.controls['phone'].errors?.pattern">
              Mobile number not valid.
            </div>
          </form>
        </ion-col>
      </ion-row>
    </ion-col>
  </ion-row>

  <ion-row class="ion-padding" [hidden]="!showOTPInput">
    <ion-col size="12">
      <ion-row>
        <ion-col size="12">
          <h2>Please wait.</h2>
          <h2>We will auto verify the OTP sent to +91-{{displaynumber}}</h2>
          <a (click)="changeNumber()">Change Number?</a>
        </ion-col>
        <ion-col size="12"> </ion-col>
      </ion-row>
      <ion-row class="OTP-border">
        <ion-col>
          <ng-otp-input #ngOtpInput [config]="config"></ng-otp-input>
        </ion-col>
      </ion-row>
      <ion-row *ngIf="showOTPInput">
        <ion-col>
          <ion-text class="small">You will receive a sms soon</ion-text>
        </ion-col>
      </ion-row>
      <ion-row>
        <!-- <ion-col size="6" text-left>
          <ion-button
            (click)="resendOTP()"
            fill="clear"
            [disabled]="isresendactive"
            style="
              --background: transparent;
              color: black;
              text-transform: none;
            "
          >
            Resend OTP
          </ion-button>
        </ion-col>
        <ion-col size="6" text-left>
          <p>{{otptiming}} s</p>
        </ion-col> -->
        <ion-col size="12">
          <ion-item>
            <ion-label>   <ion-button
            (click)="resendOTP()"
            fill="clear"
         
            style="
              --background: transparent;
              color: black;
              text-transform: none;"
          >
            Resend OTP
          </ion-button></ion-label>
            <ion-label slot="end">{{otptiming}} s</ion-label>
          </ion-item>
        </ion-col>
      </ion-row>
    </ion-col>
  </ion-row>
  <ion-button
    *ngIf="!showOTPInput"
    expand="block"
    type="submit"
    color="primary"
    class="transition nextbutton"
    (click)="next()"
    [disabled]="!loginForm.valid"
  >
    <strong class="white"> Next</strong></ion-button
  >
  <ion-button
    *ngIf="showOTPInput"
    expand="block"
    type="submit"
    color="primary"
    class="transition"
    style="
      margin-top: 20px;
      position: absolute;
      bottom: 4px;
      width: 96%;
      margin-left: 2%;
    "
    (click)="verifyOTP()"
  >
    <strong class="white">Verify</strong></ion-button
  >
</ion-content>
